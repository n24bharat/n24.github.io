<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>n24.in â€“ Independent Hindi News</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
  background: #0b0b0b;
  color: #eee;
}

header {
  padding: 14px 16px;
  font-size: 20px;
  font-weight: 700;
  background: #111;
  border-bottom: 1px solid #222;
}

section {
  padding: 12px;
}

h2 {
  margin: 12px 0;
  font-size: 18px;
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 12px;
}

.card {
  background: #141414;
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid #222;
}

.thumb img {
  width: 100%;
  height: 160px;
  object-fit: cover;
  background: #000;
}

.meta {
  padding: 8px 10px;
}

.meta a {
  color: #fff;
  text-decoration: none;
  font-size: 14px;
  font-weight: 600;
  line-height: 1.3;
}

.meta .src {
  font-size: 12px;
  opacity: 0.7;
  margin-top: 4px;
}

.loader {
  opacity: 0.6;
  font-size: 14px;
}
</style>
</head>

<body>
<header>ðŸ“° n24.in â€“ Independent Hindi News & Videos</header>

<section>
  <h2>ðŸ“º Latest Videos (Last 24 Hours)</h2>
  <div id="videos" class="grid"></div>
  <div id="vstatus" class="loader">Loading videosâ€¦</div>
</section>

<script>
/* ================= CONFIG ================= */

const VIDEO_SOURCES = [
  { name: "Ravish Kumar", id: "UCAeRZx2rK7V8sUjXClmWlug" },
  { name: "Dhruv Rathee", id: "UC4R8DWoMoI7CAwX8_LjQHig" },
  { name: "Deshbhakt (Akash)", id: "UC3yQAk4w8wN8Pz4XgQ4J1RA" },
  { name: "The Lallantop", id: "UCx8Z14PpntdaxCt2hakbQLQ" },
  { name: "Punya Prasun Vajpayee", id: "UCXCG3leC3eHChlU2OPWMk_A" }
];

const HOURS = 24;

/* ============== HELPERS ================== */

function ytId(url) {
  const m = url.match(/(v=|\/)([A-Za-z0-9_-]{11})/);
  return m ? m[2] : null;
}

function isRecent(dateStr) {
  const t = new Date(dateStr).getTime();
  return Date.now() - t < HOURS * 3600 * 1000;
}

/* ============== VIDEO LOADER ============== */

async function loadVideos() {
  const out = document.getElementById("videos");
  const status = document.getElementById("vstatus");
  let count = 0;

  for (const src of VIDEO_SOURCES) {
    const url =
      "https://api.allorigins.win/raw?url=" +
      encodeURIComponent(
        `https://www.youtube.com/feeds/videos.xml?channel_id=${src.id}`
      );

    try {
      const res = await fetch(url, { cache: "no-store" });
      const txt = await res.text();

      if (!txt.startsWith("<?xml")) {
        console.info("Skipped video source:", src.name);
        continue;
      }

      const xml = new DOMParser().parseFromString(txt, "text/xml");
      const entries = [...xml.querySelectorAll("entry")];

      for (const e of entries) {
        const link = e.querySelector("link")?.getAttribute("href");
        const date = e.querySelector("published")?.textContent;
        if (!link || !isRecent(date)) continue;

        const vid = ytId(link);
        if (!vid) continue;

        const title = e.querySelector("title")?.textContent || "";
        const thumb = `https://i.ytimg.com/vi/${vid}/hqdefault.jpg`;

        out.insertAdjacentHTML(
          "beforeend",
          `<div class="card">
            <div class="thumb">
              <img loading="lazy" src="${thumb}">
            </div>
            <div class="meta">
              <a href="${link}" target="_blank">${title}</a>
              <div class="src">${src.name}</div>
            </div>
          </div>`
        );
        count++;
      }
    } catch (err) {
      console.info("Video feed failed:", src.name);
    }
  }

  status.textContent = count
    ? `Showing ${count} videos`
    : "No recent videos found";
}

loadVideos();
</script>
    <!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "c5b2b0d87e424dbb9e2235cca1ce9367"}'></script><!-- End Cloudflare Web Analytics -->
<script data-goatcounter="https://n24.goatcounter.com/count"  async src="//gc.zgo.at/count.js"></script>
</body>
</html>
